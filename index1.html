<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <title>Currency Converter</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" type="text/css" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link rel="manifest" href="/manifest.json">

    </head>
    <body>
        <!-- Navigation -->
        <nav class="navbar navbar-light bg-grey static-top">
            <div class="container d-flex"> <!-- Using 'd-flex' to ensure a single row -->
                <a class="navbar-brand" href="#!">Currency Converter</a>

                <!-- Right-aligned non-clickable icon -->
                <span class="ms-auto"> <!-- 'ms-auto' to push content to the right -->
                    <img src="assets/favicon.ico" alt="Favicon Icon" style="height: 24px;" /> <!-- Non-clickable icon -->
                </span>
            </div>
        </nav>
        
                    <div class="form-group mb-3 d-flex align-items-center">
                        
                        <input type="number" step="0.01" class="form-control" id="currencyA" placeholder="Enter amount" />
                        <select class="form-select form-select-sm mx-2" id="fromCurrency"></select>
                    </div>
                    <div class="form-group mb-3 d-flex align-items-center">
                        <input type="number" step="0.01" class="form-control" id="currencyB" placeholder="Enter amount" />
                        <select class="form-select form-select-sm mx-2" id="toCurrency"></select>
                    </div>

        <!-- Footer-->
        <footer class="footer bg-grey">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 h-100 text-center text-lg-start my-auto">
                        <p class="text-muted small mb-4 mb-lg-0">&copy; Simple Currency Converter 2024. All Rights Reserved.</p>
                    </div>
                    <div class="col-lg-6 h-100 text-center text-lg-end my-auto">
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item me-4">
                                <a href="https://github.com/jhjhajh/currencyConverter"><i class="bi-github fs-3"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

            <script>
            
            function fetchCurrencies() {
            fetch("https://api.frankfurter.app/currencies")
                .then(response => response.json())
                .then(data => {
                const currencies = Object.keys(data);
                // Populate dropdown menus with fetched currencies
                populateDropdownMenus(currencies);
                })
                .catch(error => console.error(error));
            }

            // Function to populate dropdown menus with currencies
            function populateDropdownMenus(currencies) {
            const fromCurrencyMenu = document.getElementById("fromCurrency");
            const toCurrencyMenu = document.getElementById("toCurrency");
            currencies.forEach(currency => {
                const optionFrom = document.createElement("option");
                optionFrom.value = currency;
                optionFrom.text = currency;
                fromCurrencyMenu.appendChild(optionFrom);

                const optionTo = document.createElement("option");
                optionTo.value = currency;
                optionTo.text = currency;
                toCurrencyMenu.appendChild(optionTo);
            });
            }

            // Function to convert currency based on selected options
            function convertCurrency() {
            const fromCurrency = document.getElementById("fromCurrency").value;
            const toCurrency = document.getElementById("toCurrency").value;
            const amount = parseFloat(document.getElementById("currencyA").value);

            const url = `https://api.frankfurter.app/latest?from=${fromCurrency}&to=${toCurrency}`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                const conversionRate = data.rates[toCurrency];
                const convertedAmount = amount * conversionRate;
                document.getElementById("currencyB").value = convertedAmount.toFixed(2);
                })
                .catch(error => console.error(error));
            }

            // Call fetchCurrencies on page load
            fetchCurrencies();

            // Add event listeners to dropdown menus (assuming they have appropriate IDs)
            const fromCurrencyMenu = document.getElementById("fromCurrency");
            const toCurrencyMenu = document.getElementById("toCurrency");

            fromCurrencyMenu.addEventListener("change", convertCurrency);
            toCurrencyMenu.addEventListener("change", convertCurrency);

            // Existing event listener for user input in currencyAInput can remain

            
            </script>
            <!-- Register the Service Worker -->
            <script>
                
                if ("serviceWorker" in navigator) {
                    navigator.serviceWorker
                        .register("https://github.com/jhjhajh/currencyConverter/service-worker.js")
                        .then(() => {
                            console.log("Service Worker registered");
                        })
                        .catch((error) => {
                            console.error("Service Worker registration failed:", error);
                        });
                }
            </script>
    </body>
</html>
